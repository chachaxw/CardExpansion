"use strict";var demo=function(t,e){function o(){var e=Trianglify({width:t.innerWidth,height:t.innerHeight,cell_size:90,variance:1,stroke_width:1,x_colors:"Purples"}).svg();s(e),d()}function s(t){$(n.pattern).append(t),a.paths=[].slice.call(t.childNodes),a.points=[],a.paths.forEach(function(t){$(t).attr("class",i.polygon+""+i.patternHidden);var e=t.getBoundingClientRect(),n={x:e.left+e.width/2,y:e.top+e.height/2};a.points.push(n)}),$(n.pattern).removeClass(i.polygonHidden)}function d(){var t=$(n.card);$.each(t,function(t,e){var i=new Card(e,t);r[e]={card:i};var a=$(t).find(n.cardImage),o=$(t).find(n.cardClose);a.on("click",c.bind(this,!0,e)),o.on("click",c.bind(this,!1,e))})}function c(t,e,n){var i=r[e].card;if(!i.isOpen||!t){var a=new TimelineLite({pasued:!0}),o=l(e);if(i.isOpen){var s=i.closeCard(),d=.8*s.duration();a.add(s),a.add(o,d)}else a.add(o),a.add(i.openCard(h),0);a.play()}}function l(t){var e=new TimelineLite,n=r[t].card;for(var i in r){var a=r[i].card;a.id===t||n.isOpen||e.add(a.hideCard(),0),a.id!==t&&n.isOpen&&e.add(a.showCard(),0)}return e}function h(t){var e=t.width/2,n={x:t.x,y:t.y};a.points.forEach(function(t,r){p(t,e,n)?$(a.paths[r]).attr("class",i.polygon):$(a.paths[r]).attr("class",i.polygon+""+i.polygonHidden)})}function p(t,e,n){var i=t.x,a=t.y,r=n.x,o=n.y,s=e*e,d=Math.pow(i-r,2)+Math.pow(a-o,2)<=s;return d}var n={pattern:".pattern",card:".card",cardImage:".card_image",cardClose:".card_btn-close"},i={patternHidden:".pattern-hidden",polygon:".polygon",polygonHidden:".polygon-hidden"},a={paths:null,points:null},r={};return{init:o}}(window);window.onload=demo.init;