"use strict";var demo=function(t,e){function a(){var e=Trianglify({width:t.innerWidth,height:t.innerHeight,cell_size:90,variance:1,stroke_width:1,x_colors:"Purples"}).svg();s(e),d()}function s(t){$(n.pattern).append(t),o.paths=[].slice.call(t.childNodes),o.points=[],o.paths.forEach(function(t){$(t).attr("class",i.polygon+""+i.patternHidden);var e=t.getBoundingClientRect(),n={x:e.left+e.width/2,y:e.top+e.height/2};o.points.push(n)}),$(n.pattern).removeClass(i.polygonHidden)}function d(){var t=$(n.card);$.each(t,function(t,e){var i=new Card(e,t);r[e]={card:i};var o=$(t).find(n.cardImage),a=$(t).find(n.cardClose);o.on("click",c.bind(this,!0,e)),a.on("click",c.bind(this,!1,e))})}function c(t,e,n){var i=r[e].card;if(!i.isOpen||!t){var o=new TimelineLite({pasued:!0}),a=h(e);if(i.isOpen){var s=i.closeCard(),d=.8*s.duration();o.add(s),o.add(a,d)}else o.add(a),o.add(i.openCard(l),0);o.play()}}function h(t){var e=new TimelineLite,n=r[t].card;for(var i in r){var o=r[i].card;o.id===t||n.isOpen||e.add(o.hideCard(),0),o.id!==t&&n.isOpen&&e.add(o.showCard(),0)}return e}function l(t){var e=t.width/2,n={x:t.x,y:t.y};o.points.forEach(function(t,r){p(t,e,n)?$(o.paths[r]).attr("class",i.polygon):$(o.paths[r]).attr("class",i.polygon+""+i.polygonHidden)})}function p(t,e,n){var i=t.x,o=t.y,r=n.x,a=n.y,s=e*e,d=Math.pow(i-r,2)+Math.pow(o-a,2)<=s;return d}var n={pattern:".pattern",card:".card",cardImage:".card_image",cardClose:".card_btn-close"},i={patternHidden:".pattern-hidden",polygon:".polygon",polygonHidden:".polygon-hidden"},o={paths:null,points:null},r={};return{init:a}}(window);window.onload=demo.init;